# 微信机器人诊断工具（独立版本）

## 概述

这是微信机器人的独立诊断工具，与主项目隔离运行，不会影响主项目的配置和数据。

## 目录结构

```
diagnostic_standalone/
├── diagnostic_tool.py              # 诊断工具主程序
├── diagnostic_solutions.md         # 问题解决方案
├── requirements_diagnostic.txt     # 依赖列表
├── run_diagnostic_standalone.bat   # 独立启动脚本
├── run_diagnostic.bat             # 原始启动脚本
├── templates/                      # 网页模板
│   ├── diagnostic.html            # 诊断页面
│   ├── config_editor.html         # 配置编辑页面
│   ├── login.html                 # 登录页面
│   └── quick_start.html           # 快速开始页面
└── README.md                      # 本说明文件
```

## 数据引用

独立版本会自动引用上层目录的以下数据：
- `../config.py` - 配置文件
- `../emojis/` - 表情包目录
- `../prompts/` - 提示词目录
- `../Memory_Temp/` - 记忆临时目录
- `../libs/` - 依赖库目录

## 启动方式

### 方式一：使用独立启动脚本（推荐）
```bash
run_diagnostic_standalone.bat
```

### 方式二：直接运行Python
```bash
cd diagnostic_standalone
python diagnostic_tool.py
```

### 方式三：使用原始启动脚本
```bash
run_diagnostic.bat
```

## 功能特性

### 7项核心测试
1. **网络连通性测试** - 测试访问百度、接口站点连通性
2. **对话测试** - 发送测试消息验证AI对话功能
3. **模型测试** - 检查配置文件、验证参数范围、确认模型设置
4. **记忆整理测试** - 检查记忆配置、验证目录结构、测试文件权限
5. **基本功能测试** - 扫描微信进程、测试模块导入、检查运行环境
6. **用户获取测试** - 验证监听配置、测试微信接口、检查用户信息
7. **微信交互测试** - 打开聊天窗口、测试输入框表情输入、验证完整交互流程

### 真实消息发送
- 测试7支持真实消息发送功能
- 勾选"发送真实测试消息"复选框可启用
- 随机选择表情文件发送，避免重复
- 支持全自动测试和手动重试两种模式

### 实时监控
- 实时日志显示
- 进度条显示测试进度
- 支持单项重新测试
- 错误时显示解决方案

## 安全特性

1. **数据隔离** - 不会修改主项目的任何文件
2. **配置只读** - 只读取配置，不会修改配置
3. **临时文件管理** - 自动清理临时发送脚本
4. **进程隔离** - 真实发送在独立进程中执行

## 注意事项

1. **微信要求** - 使用前请确保微信已启动并登录
2. **网络要求** - 需要网络连接进行连通性测试
3. **权限要求** - 需要读取上层目录的权限
4. **真实发送** - 勾选真实发送时会向配置的第一个联系人发送表情

## 故障排除

如果遇到问题，请：
1. 检查是否在正确的目录中启动
2. 确认上层目录存在必要的文件
3. 查看诊断日志中的错误信息
4. 点击错误图标查看解决方案

## 版本信息

- 创建时间：2025年6月15日
- 版本：独立版本 v1.0
- 兼容性：Python 3.7+
- 依赖：Flask, psutil, requests, wxautox_wechatbot